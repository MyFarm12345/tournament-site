<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ü–æ–¥—ñ—ó ‚Äî –°—Ç—É–¥–µ–Ω—Ç—Å—å–∫–∞ —Ä–∞–¥–∞</title>
<style>
:root{
  --bg1:#ffffff; --bg2:#f8fafc; --accent:#2563eb;
  --text-primary:#1e293b; --text-secondary:#64748b;
  --card:#ffffff; --border:#e2e8f0;
  --success:#10b981; --warning:#f59e0b; --error:#ef4444;
}
*{box-sizing:border-box}
body {
  margin:0;
  font-family:Inter, "Segoe UI", Roboto, Arial, system-ui;
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
  color:var(--text-primary);
  background: #ffffff;
  line-height: 1.6;
  display: flex;
  flex-direction: column;
}

/* Improved animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* top bar */
header{
  position:sticky; top:0; z-index:60;
  backdrop-filter: blur(8px);
  background: rgba(255,255,255,0.95);
  border-bottom:1px solid var(--border);
  padding:12px 22px;
  display:flex; align-items:center; justify-content:space-between;
  transition: all 0.3s ease;
}
header.scrolled {
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
}
.logo{display:flex;gap:12px;align-items:center;font-weight:700;color:#0f172a; text-decoration: none;}
.logo:hover { opacity: 0.9; }
.logo .badge{background:var(--accent); width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;box-shadow:0 4px 14px rgba(37, 99, 235, 0.15); transition: all 0.3s ease;}
.logo .badge:hover { transform: rotate(5deg); }
nav{display:flex;gap:8px;align-items:center; flex-wrap: wrap;}
nav button{background:transparent;border:none;color:var(--text-primary);padding:8px 12px;border-radius:8px;font-weight:600;cursor:pointer; transition: all 0.2s ease;}
nav button:hover{background:rgba(0,0,0,0.05); transform: translateY(-2px);}
nav button.active{background:var(--accent); color: white;}
.auth{display:flex;gap:8px;align-items:center}
.auth button{background:var(--accent); color:#fff;padding:8px 16px;border-radius:10px;border:none;font-weight:700;cursor:pointer; transition: all 0.3s ease;}
.auth button:hover { opacity: 0.9; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2); }
.auth .role{background:rgba(0,0,0,0.05); padding:6px 12px;border-radius:999px;color:var(--text-primary);border:1px solid rgba(0,0,0,0.05); font-size: 12px;}

/* container */
.wrap{
  max-width:1200px;
  margin:28px auto;
  padding:0 20px;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-height: 60vh;
}

/* hero */
.hero{display:grid;grid-template-columns:1fr;gap:28px;align-items:center;margin-bottom:28px; animation: fadeIn 0.8s ease;}
.hero .lead{background:var(--card); padding:32px;border-radius:18px;box-shadow:0 10px 25px rgba(0,0,0,0.05); color:var(--text-primary); border: 1px solid var(--border);}
h1{font-size:32px;margin:0 0 12px;line-height:1.2;color:#0f172a;}
.lead p{margin:0;color:var(--text-secondary); line-height: 1.6;}
.cta{margin-top:22px;display:flex;gap:12px; flex-wrap: wrap;}
.btn{background:var(--accent); color:white;padding:12px 20px;border-radius:10px;border:none;font-weight:700;cursor:pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 8px;}
.btn:hover { opacity: 0.9; transform: translateY(-2px); box-shadow: 0 6px 15px rgba(37, 99, 235, 0.2); }
.btn.secondary{background:#f1f5f9;border:1px solid var(--border);color:var(--text-primary); box-shadow: 0 2px 5px rgba(0,0,0,0.05);}
.btn.secondary:hover { background: #e2e8f0; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
.btn i { font-size: 16px; }

/* right card */
.card{background:var(--card); border-radius:14px;padding:22px;color:var(--text-primary); box-shadow:0 8px 20px rgba(0,0,0,0.06); border:1px solid var(--border); transition: all 0.3s ease; margin-bottom: 20px;}
.card:hover { transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.1); }
.timeline{display:flex;flex-direction:column;gap:12px}
.tl-item{display:flex;gap:12px;align-items:flex-start; padding: 10px; border-radius: 10px; transition: all 0.2s ease;}
.tl-item:hover { background: #f8fafc; }
.tl-item .dot{width:12px;height:12px;background:var(--accent);border-radius:999px;margin-top:6px;box-shadow:0 4px 10px rgba(37, 99, 235, 0.2); flex-shrink: 0;}
.tl-item .txt small{color:var(--text-secondary);display:block; margin-top: 4px;}

/* grid areas */
.grid3{display:grid;grid-template-columns: 1fr 380px; gap:24px}
.main-col{display:flex;flex-direction:column;gap:24px}

/* empty state */
.empty-state {
  text-align: center;
  padding: 60px 20px;
  color: var(--text-secondary);
}
.empty-state-icon {
  font-size: 64px;
  margin-bottom: 20px;
  opacity: 0.5;
}
.empty-state h2 {
  color: var(--text-primary);
  margin-bottom: 16px;
}
.empty-state p {
  max-width: 500px;
  margin: 0 auto 30px;
}

/* small util */
.muted{color:var(--text-secondary)}
.row{display:flex;gap:12px;align-items:center; flex-wrap: wrap;}
.badge-success { background: var(--success); color: white; padding: 4px 8px; border-radius: 999px; font-size: 12px; }
.badge-warning { background: var(--warning); color: white; padding: 4px 8px; border-radius: 999px; font-size: 12px; }
.badge-error { background: var(--error); color: white; padding: 4px 8px; border-radius: 999px; font-size: 12px; }

/* footer */
footer{
  margin-top: auto;
  text-align:center;
  color:var(--text-secondary); 
  padding: 20px; 
  border-top: 1px solid var(--border);
}

/* notifications */
.notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 16px 20px;
  border-radius: 10px;
  color: white;
  box-shadow: 0 5px 15px rgba(0,0,0,0.15);
  z-index: 1000;
  display: flex;
  align-items: center;
  gap: 10px;
  transform: translateX(100vw);
  transition: transform 0.4s ease;
}
.notification.show {
  transform: translateX(0);
}
.notification.success { background: var(--success); }
.notification.error { background: var(--error); }
.notification.warning { background: var(--warning); }

/* responsive */
@media (max-width:1080px){
  .hero{grid-template-columns:1fr; padding-bottom:12px}
  .grid3{grid-template-columns:1fr}
}

@media (max-width:768px){
  header { flex-direction: column; gap: 15px; padding: 15px; }
  nav { width: 100%; justify-content: center; }
  .auth { width: 100%; justify-content: center; }
  .cta { flex-direction: column; }
  .hero .lead { padding: 20px; }
  .card { padding: 18px; }
}

@media (max-width:480px){
  .wrap { padding: 0 15px; }
  h1 { font-size: 26px; }
  .btn { width: 100%; justify-content: center; }
}
</style>
</head>
<body>

<header>
<a href="https://kre.dp.ua" style="display:flex; align-items:center; text-decoration:none;">
  <div style="width:40px; height:40px; background-color:#2563eb; color:#fff; display:flex; align-items:center; justify-content:center; font-weight:bold; border-radius:6px; margin-right:10px;">
    SR
  </div>
  <div>
    <div style="font-size:14px; color:#334155; font-weight:600;">–°—Ç—É–¥–µ–Ω—Ç—Å—å–∫–∞ —Ä–∞–¥–∞</div>
    <div style="font-size:11px; color:#64748b;">–ö–æ–ª–µ–¥–∂ ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Å–∞–π—Ç –î–§–ö–†</div>
  </div>
</a>
  <nav>
    <a href="Home.html"><button id="nav-projects">–ì–æ–ª–æ–≤–Ω–∞</button></a>
   <a href="info.html"><button id="nav-projects"">–ü—Ä–æ —Ä–∞–¥—É</button></a>
     <a href="command.html"><button id="nav-projects ">–ö–æ–º–∞–Ω–¥–∞</button></a>
    <a href="news.html"><button id="nav-projects">–ù–æ–≤–∏–Ω–∏</button></a>
    <a href="project.html"><button id="nav-projects">–ü—Ä–æ—î–∫—Ç–∏</button></a>
    <a href="event.html"><button id="nav-projects" class="active">–ü–æ–¥—ñ—ó</button></a>
  </nav>
  <div class="auth" id="authArea">
    <!-- auth UI inserted here -->
  </div>
</header>

<main class="wrap">
  <!-- Empty state -->
  <div class="card">
    <div class="empty-state">
      <div class="empty-state-icon">üìÖ</div>
      <h2>–ù–∞ –¥–∞–Ω–∏–π —á–∞—Å –Ω–µ–º–∞—î –ø–æ–¥—ñ–π</h2>
      <p>–ú–∏ –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∞—Ü—é—î–º–æ –Ω–∞–¥ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è–º –Ω–æ–≤–∏—Ö —Ü—ñ–∫–∞–≤–∏—Ö –∑–∞—Ö–æ–¥—ñ–≤. –°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏, —â–æ–± –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –∞–Ω–æ–Ω—Å–∏ –º–∞–π–±—É—Ç–Ω—ñ—Ö –ø–æ–¥—ñ–π!</p>
      <button class="btn" onclick="location.href='news.html'"><i>üì∞</i> –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –Ω–æ–≤–∏–Ω–∏</button>
    </div>
  </div>
</main>

<footer>
  <div style="opacity:0.9;color:var(--text-secondary); margin-bottom: 10px;">¬© 2025 –°—Ç—É–¥–µ–Ω—Ç—Å—å–∫–∞ —Ä–∞–¥–∞ ‚Äî –∑—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤</div>
  <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
    <a href="privacy.html" style="color: var(--accent); text-decoration: none;">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</a>
    <a href="#" style="color: var(--accent); text-decoration: none;">–î–æ–ø–æ–º–æ–≥–∞</a>
  </div>
</footer>

<!-- NOTIFICATION CONTAINER -->
<div id="notificationContainer"></div>

<script>
/* =========================
   Data layer - localStorage
   ========================= */
const LS = {
  USER: 'sr_user_v2'
};

function read(key, def){ try{ return JSON.parse(localStorage.getItem(key) || 'null') || def }catch(e){return def}}

/* =========================
   Auth system with Supabase Auth
   ========================= */

const ADMIN_UIDS = [
  '4495aa8c-46fe-46de-8246-20cce7be22a4', 
  '375bd9f4-2550-4055-8011-9ac386596898',
  'b25d0c73-dd74-4dc5-9a32-77ad1e526db3' 
];

async function initAuth() {
  const { data: { session } } = await supabase.auth.getSession();
  if (session) {
    await setCurrentUser(session.user);
  }
  
  supabase.auth.onAuthStateChange((event, session) => {
    if (event === 'SIGNED_IN' && session) {
      setCurrentUser(session.user);
      renderAll();
    } else if (event === 'SIGNED_OUT') {
      currentUser = null;
      renderAll();
    }
  });
}

async function setCurrentUser(user) {
  const isAdmin = ADMIN_UIDS.includes(user.id);
  currentUser = {
    id: user.id,
    email: user.email,
    name: user.email.split('@')[0],
    role: isAdmin ? 'admin' : 'user'
  };
}

function renderAuth() {
  const el = document.getElementById('authArea');
  el.innerHTML = '';
  
  if (currentUser) {
    const roleSpan = document.createElement('div');
    roleSpan.className = 'role';
    roleSpan.style.marginRight = '8px';
    roleSpan.textContent = currentUser.role.toUpperCase();
    
    const name = document.createElement('div');
    name.style.color = '#334155';
    name.style.fontWeight = '700';
    name.style.marginRight = '8px';
    name.textContent = currentUser.email || currentUser.name;
    
    const btnOut = document.createElement('button');
    btnOut.textContent = '–í–∏–π—Ç–∏';
    btnOut.onclick = logout;
    
    el.appendChild(name);
    el.appendChild(roleSpan);
    el.appendChild(btnOut);
  } else {
    const btn = document.createElement('button');
    btn.textContent = '–£–≤—ñ–π—Ç–∏';
    btn.onclick = showLogin;
    el.appendChild(btn);
  }
  
  toggleAdminButtons();
}

function showLogin() {
  modalOpen(`<h3>–í—Ö—ñ–¥ —á–µ—Ä–µ–∑ Supabase Auth</h3>
    <div style="display:flex;flex-direction:column;gap:12px;margin-top:12px">
      <input id="loginEmail" type="email" placeholder="Email" style="padding:12px;border:1px solid var(--border);border-radius:8px">
      <input id="loginPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å" style="padding:12px;border:1px solid var(--border);border-radius:8px">
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button onclick="modalClose()" class="btn secondary">–í—ñ–¥–º—ñ–Ω–∏—Ç–∏</button>
        <button class="btn" onclick="doLogin()">–£–≤—ñ–π—Ç–∏</button>
      </div>
    </div>`, 480);
  document.getElementById('loginEmail').focus();
}

async function doLogin() {
  const email = (document.getElementById('loginEmail').value || '').trim();
  const password = (document.getElementById('loginPass').value || '').trim();
  
  if (!email || !password) {
    showNotification('–í–≤–µ–¥—ñ—Ç—å email —ñ –ø–∞—Ä–æ–ª—å', 'error');
    return;
  }
  
  showLoading();
  
  try {
    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password
    });
    
    if (error) throw error;
    
    await setCurrentUser(data.user);
    modalClose();
    
    console.log('User logged in:', currentUser);
    
    showNotification(`–í—ñ—Ç–∞—î–º–æ! –í–∏ —É–≤—ñ–π—à–ª–∏ —è–∫ ${currentUser.role === 'admin' ? '–∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä' : '–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á'}`, 'success');
    
    
    await renderAll();
    
  } catch (error) {
    showNotification('–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É: ' + error.message, 'error');
  } finally {
    hideLoading();
  }
}

async function logout() {
  showLoading();
  try {
    await supabase.auth.signOut();
    currentUser = null;
    showNotification('–í–∏ –≤–∏–π—à–ª–∏ –∑ —Å–∏—Å—Ç–µ–º–∏', 'success');
    renderAll();
  } catch (error) {
    showNotification('–ü–æ–º–∏–ª–∫–∞ –≤–∏—Ö–æ–¥—É: ' + error.message, 'error');
  } finally {
    hideLoading();
  }
}

function toggleAdminButtons() {
  const isAdmin = currentUser && currentUser.role === 'admin';
  
  console.log('toggleAdminButtons called:', { isAdmin, currentUser });
  
  const adminButtons = [
    'uploadPdfBtn',
    'addMemberBtn', 
    'createNewsBtn'
  ];
  
  adminButtons.forEach(btnId => {
    const btn = document.getElementById(btnId);
    console.log(`Button ${btnId}:`, btn ? 'found' : 'not found', 'isAdmin:', isAdmin);
    if (btn) {
      btn.style.display = isAdmin ? 'inline-flex' : 'none';
    }
  });
  
  if (isAdmin) {
    console.log('Admin mode enabled - showing admin controls');
  }
}

/* =========================
   Notification system
   ========================= */
function showNotification(message, type = 'success') {
  const container = document.getElementById('notificationContainer');
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.innerHTML = `
    <div>${message}</div>
  `;
  container.appendChild(notification);
  
  
  setTimeout(() => {
    notification.classList.add('show');
  }, 10);
  
  
  setTimeout(() => {
    notification.classList.remove('show');
    setTimeout(() => {
      container.removeChild(notification);
    }, 400);
  }, 3000);
}

/* =========================
   Scroll effect for header
   ========================= */
window.addEventListener('scroll', function() {
  const header = document.querySelector('header');
  if (window.scrollY > 50) {
    header.classList.add('scrolled');
  } else {
    header.classList.remove('scrolled');
  }
});

/* =========================
   Initialize on load
   ========================= */
document.addEventListener('DOMContentLoaded', function() {
  renderAuth();
});
</script>
</body>
</html>